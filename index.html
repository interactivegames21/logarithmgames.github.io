<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Logarithm Quiz Game</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
      color: #ffffff;
      text-align: center;
      padding: 30px 20px;
      margin: 0;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('https://www.transparenttextures.com/patterns/stardust.png');
      opacity: 0.1;
      z-index: -1;
    }

    #game, #setup {
      background: rgba(255, 255, 255, 0.05);
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
      max-width: 600px;
      width: 90vw;
      margin: auto;
      backdrop-filter: blur(8px);
    }

    h1, h2 {
      color: #00ffe5;
      text-shadow: 0 0 5px #00ffe5, 0 0 10px #00ffe5;
      font-size: 2rem;
    }

    p {
      font-size: 1.1rem;
    }

    button {
      background-color: #1e90ff;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 14px 24px;
      font-size: 1rem;
      margin: 12px auto;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(30, 144, 255, 0.4);
      transition: background-color 0.3s, transform 0.2s;
      width: 80%;
      max-width: 300px;
      display: block;
    }

    button:hover {
      background-color: #00bfff;
      transform: scale(1.05);
    }

    .correct {
      background-color: #28a745 !important;
    }

    .incorrect {
      background-color: #dc3545 !important;
    }

    #explanation {
      font-style: italic;
      color: #b3f0ff;
      margin-top: 10px;
    }

    #timer {
      font-size: 1.2rem;
      color: #ffcc00;
      margin-bottom: 10px;
    }

    .player1 { color: #ffd700; text-shadow: 0 0 5px #ffd700, 0 0 10px #ffd700; }
    .player2 { color: #ff69b4; text-shadow: 0 0 5px #ff69b4, 0 0 10px #ff69b4; }
    .player3 { color: #00ffff; text-shadow: 0 0 5px #00ffff, 0 0 10px #00ffff; }

    @media (max-width: 600px) {
      h1, h2 { font-size: 1.5rem; }
      p { font-size: 1rem; }
      button { font-size: 0.95rem; padding: 12px 20px; }
    }
  </style>
</head>
<body>
  <div id="setup">
    <h1>Logarithm Multiplayer Game</h1>
    <p>Select number of players (2 or 3):</p>
    <button onclick="startGame(2)">2 Players</button>
    <button onclick="startGame(3)">3 Players</button>
  </div>

  <div id="game" style="display: none;">
    <h1>Logarithm Multiplayer Game</h1>
    <p id="turn"></p>
    <p id="timer"></p>
    <p id="question"></p>
    <div id="options"></div>
    <p id="explanation"></p>
  </div>

  <script>
  const baseQuestions = [
    {
      question: "What is log‚ÇÅ‚ÇÄ(1000)?",
      options: ["2", "3", "4", "1"],
      answer: "3",
      explanation: "log‚ÇÅ‚ÇÄ(1000) = 3 because 10¬≥ = 1000."
    },
    {
      question: "If log‚ÇÇ(x) = 5, what is x?",
      options: ["32", "10", "25", "64"],
      answer: "32",
      explanation: "2‚Åµ = 32, so x = 32."
    },
    {
      question: "Simplify: log‚ÇÉ(81)",
      options: ["4", "3", "2", "5"],
      answer: "4",
      explanation: "log‚ÇÉ(81) = 4 because 3‚Å¥ = 81."
    },
    {
      question: "log‚Çê(a‚Å∑) = ?",
      options: ["1", "a", "7", "a‚Å∑"],
      answer: "7",
      explanation: "log‚Çê(a‚Å∑) = 7 by logarithmic identity."
    },
    {
      question: "What is log‚ÇÅ‚ÇÄ(1)?",
      options: ["0", "1", "10", "-1"],
      answer: "0",
      explanation: "log‚ÇÅ‚ÇÄ(1) = 0 because 10‚Å∞ = 1."
    },
    {
      question: "If log‚ÇÖ(25) = x, what is x?",
      options: ["1", "2", "3", "4"],
      answer: "2",
      explanation: "5¬≤ = 25, so x = 2."
    },
    {
      question: "Simplify: log‚ÇÇ(8) + log‚ÇÇ(4)",
      options: ["3", "4", "5", "6"],
      answer: "5",
      explanation: "log‚ÇÇ(8)=3 and log‚ÇÇ(4)=2. 3 + 2 = 5."
    },
    {
      question: "What is the value of log‚ÇÅ‚ÇÄ(100)?",
      options: ["1", "10", "2", "3"],
      answer: "2",
      explanation: "log‚ÇÅ‚ÇÄ(100) = 2 because 10¬≤ = 100."
    },
    {
      question: "If log‚ÇÑ(64) = x, what is x?",
      options: ["2", "4", "3.5", "3"],
      answer: "3",
      explanation: "4¬≥ = 64, so x = 3."
    }
  ];

  function shuffle(arr) {
    return arr.map(v => ({ v, s: Math.random() }))
              .sort((a, b) => a.s - b.s)
              .map(({ v }) => v);
  }

  let numPlayers = 2;
  let currentPlayer = 0;
  let scores = [];
  let playerQuestions = [];
  let currentIndexes = [];
  let history = [];

  function startGame(players) {
    numPlayers = players;
    scores = Array(players).fill(0);
    playerQuestions = Array(players).fill(null).map(() => shuffle([...baseQuestions]));
    currentIndexes = Array(players).fill(0);
    document.getElementById("setup").style.display = "none";
    document.getElementById("game").style.display = "block";
    displayQuestion();
  }

  function displayQuestion() {
    const q = playerQuestions[currentPlayer][currentIndexes[currentPlayer]];
    const turn = document.getElementById("turn");
    turn.textContent = `Player ${currentPlayer + 1}'s turn`;
    turn.className = `player${(currentPlayer % 3) + 1}`;
    document.getElementById("question").textContent = q.question;
    document.getElementById("explanation").textContent = "";

    const options = document.getElementById("options");
    options.innerHTML = "";
    q.options.forEach(opt => {
      const btn = document.createElement("button");
      btn.textContent = opt;
      btn.onclick = () => selectAnswer(opt, btn, q);
      options.appendChild(btn);
    });
  }

  function selectAnswer(option, btn, q) {
    const correct = q.answer;
    const buttons = document.querySelectorAll("#options button");

    buttons.forEach(b => {
      b.disabled = true;
      if (b.textContent === correct) b.classList.add("correct");
      if (b.textContent === option && option !== correct) b.classList.add("incorrect");
    });

    if (option === correct) scores[currentPlayer]++;
    history.push({ ...q, chosen: option, correct, player: currentPlayer + 1 });

    document.getElementById("explanation").textContent = q.explanation;

    setTimeout(() => {
      currentIndexes[currentPlayer]++;
      const allDone = currentIndexes.every((val, i) => val >= playerQuestions[i].length);
      currentPlayer = (currentPlayer + 1) % numPlayers;

      if (allDone) {
        endGame();
      } else {
        while (currentIndexes[currentPlayer] >= playerQuestions[currentPlayer].length) {
          currentPlayer = (currentPlayer + 1) % numPlayers;
        }
        displayQuestion();
      }
    }, 2000);
  }

  function endGame() {
    const total = baseQuestions.length;
    const percent = Math.round((scores.reduce((a, b) => a + b, 0) / (numPlayers * total)) * 100);
    const message = percent === 100
      ? "üåü Perfect Score! You‚Äôre a logarithm master!"
      : percent >= 70
        ? "üî• Great job! Keep practicing and you‚Äôll master it."
        : "üìö Review and try again. Learning takes time!";

    let scoreHTML = scores.map((score, i) =>
      `<p>Player ${i + 1} Score: ${score} / ${playerQuestions[i].length}</p>`).join("");

    const winner = getWinners();
    document.getElementById("game").innerHTML = `
      <h2>Game Over</h2>
      ${scoreHTML}
      <p><strong>Total Mastery: ${percent}%</strong></p>
      <p>${winner}</p>
      <p>${message}</p>
      <button onclick="location.reload()">Try Again</button>
      <button onclick="reviewAnswers()">Review Questions</button>
    `;
  }

  function getWinners() {
    const maxScore = Math.max(...scores);
    const winners = scores.map((s, i) => s === maxScore ? `Player ${i + 1}` : null).filter(Boolean);
    return winners.length === 1 ? `${winners[0]} wins!` : `It's a tie between: ${winners.join(" & ")}`;
  }

  function reviewAnswers() {
    const review = history.map((q, i) => `
      <p><strong>Q${i + 1}: ${q.question}</strong><br/>
      Player ${q.player} answered: ${q.chosen} ${q.chosen === q.correct ? "‚úÖ" : "‚ùå"}<br/>
      Correct answer: ${q.correct}<br/>
      <em>${q.explanation}</em></p>
      <hr/>
    `).join("");
    document.getElementById("game").innerHTML = `
      <h2>Review Answers</h2>
      ${review}
      <button onclick="location.reload()">Play Again</button>
    `;
  }

  window.onload = () => {
    document.getElementById("game").style.display = "none";
  };
</script>

</body>
</html>
